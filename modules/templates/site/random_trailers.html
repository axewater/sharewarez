{% extends "base.html" %}
{% block content %}

<link rel="stylesheet" href="{{ 'css/site/random_trailers.css'|theme_asset }}">

<div class="trailer-viewer-container">
    <!-- Header Section with Title and Action Buttons -->
    <div class="trailer-header-section">
        <h1 class="trailer-title">Random Game Trailers</h1>
        <div class="action-buttons-top">
            <button id="next-btn" class="btn-next">
                <i class="fas fa-forward"></i> Next Trailer
            </button>
            <a id="game-details-btn" href="#" class="btn-details">
                <i class="fas fa-info-circle"></i> Go to Game
            </a>
        </div>
    </div>

    <!-- Collapsible Filter Panel -->
    <div class="filter-panel-container">
        <button id="filter-toggle" class="filter-toggle-btn">
            <i class="fas fa-filter"></i> <span class="filter-text">Filters</span>
            <i class="fas fa-chevron-down toggle-icon"></i>
        </button>

        <div id="filter-panel" class="filter-panel collapsed">
            <div class="filter-grid">
                <!-- Platform Filter -->
                <div class="filter-item">
                    <label for="platform-filter">Platform</label>
                    <select id="platform-filter" class="filter-select">
                        <option value="">All Platforms</option>
                    </select>
                </div>

                <!-- Genre Filter -->
                <div class="filter-item">
                    <label for="genre-filter">Genres</label>
                    <select id="genre-filter" class="filter-select" multiple size="5">
                    </select>
                    <small class="filter-help">Hold Ctrl/Cmd to select multiple</small>
                </div>

                <!-- Theme Filter -->
                <div class="filter-item">
                    <label for="theme-filter">Themes</label>
                    <select id="theme-filter" class="filter-select" multiple size="5">
                    </select>
                    <small class="filter-help">Hold Ctrl/Cmd to select multiple</small>
                </div>

                <!-- Date Range From -->
                <div class="filter-item">
                    <label for="date-from">Release Year From</label>
                    <input type="number"
                           id="date-from"
                           class="filter-input"
                           placeholder="e.g., 1990"
                           min="1970"
                           max="2030">
                </div>

                <!-- Date Range To -->
                <div class="filter-item">
                    <label for="date-to">Release Year To</label>
                    <input type="number"
                           id="date-to"
                           class="filter-input"
                           placeholder="e.g., 2024"
                           min="1970"
                           max="2030">
                </div>
            </div>

            <div class="filter-actions">
                <button id="clear-filters-btn" class="btn-clear">
                    <i class="fas fa-times-circle"></i> Clear All Filters
                </button>
                <div id="filter-status" class="filter-status"></div>
            </div>
        </div>
    </div>

    <!-- Loading State -->
    <div id="loading-state" class="loading-container">
        <div class="spinner"></div>
        <p>Loading random trailer...</p>
    </div>

    <!-- Error State -->
    <div id="error-state" class="error-container" style="display: none;">
        <div class="error-message">
            <i class="fas fa-exclamation-circle"></i>
            <p id="error-text">No games with trailers found</p>
            <button onclick="location.href='/library'" class="btn-primary">Go to Library</button>
        </div>
    </div>

    <!-- Video Player Container -->
    <div id="video-container" class="video-player-container" style="display: none;">
        <div class="video-wrapper">
            <iframe id="trailer-iframe"
                    src=""
                    frameborder="0"
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                    allowfullscreen>
            </iframe>
        </div>

        <!-- Game Info (below video) -->
        <div class="game-info">
            <h2 id="game-name" class="game-name">Game Name</h2>
        </div>
    </div>
</div>

<script src="{{ 'js/random_trailers.js'|theme_asset }}"></script>

{% endblock %}
