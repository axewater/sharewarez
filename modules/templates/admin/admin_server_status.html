{% extends "base.html" %}
{% block content %}

{% if verify_file('./modules/static/library/themes/' + current_theme + '/css/admin/admin_server_status.css') == True %}
	<link rel="stylesheet" href="{{ url_for('static', filename='library/themes/' + current_theme + '/css/admin/admin_server_status.css') }}">
{% else %}
	<link rel="stylesheet" href="{{ url_for('static', filename='library/themes/default/css/admin/admin_server_status.css') }}">
{% endif %}

<div class="glass-panel">
    {% with messages = get_flashed_messages() %}
    {% if messages %}
        <div class="alert alert-info" role="alert">
            {% for message in messages %}
                {{ message }}<br>
            {% endfor %}
        </div>
    {% endif %}
    {% endwith %}
    <body>
    
    <!-- Back to Dashboard Button -->
    <div class="container">
        <div class="glass-panel">
            <a href="{{ url_for('site.admin_dashboard') }}" class="btn btn-secondary">Back to Dashboard</a>
        </div>
    </div>
    <div class="container-status-page">
        <div class="container-serverstatus-version">
            <p>SharewareZ server version: {{ app_version }}</p>
        </div>
        <div class="container mt-5">




            <h2>Application Configuration</h2>
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>Key</th>
                        <th>Value</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- System Resources Section -->
                    <tr class="table-info">
                        <td colspan="2"><strong>System Resources</strong></td>
                    </tr>
                    <tr>
                        <td>CPU Usage</td>
                        <td>{{ cpu_usage|default('N/A') }}%</td>
                    </tr>
                    {% if memory_usage %}
                    <tr>
                        <td>Memory Usage</td>
                        <td>
                            {{ memory_usage.used_formatted }} used of {{ memory_usage.total_formatted }} 
                            ({{ memory_usage.percent }}%)
                            <br>
                            Available: {{ memory_usage.available_formatted }}
                        </td>
                    </tr>
                    {% endif %}
                    {% if disk_usage %}
                    <tr>
                        <td>Disk Usage (Base Folder)</td>
                        <td>
                            {{ disk_usage.used_formatted }} used of {{ disk_usage.total_formatted }}
                            ({{ disk_usage.percent }}%)
                            <br>
                            Free: {{ disk_usage.free_formatted }}
                        </td>
                    </tr>
                    {% endif %}
                    {% for key, value in config_values.items() %}
                    <tr>
                        <td>{{ key }}</td>
                        <td>{{ value }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            <h2>System Information</h2>
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>Key</th>
                        <th>Value</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Display uptime information first -->
                    <tr class="table-primary">
                        <td><strong>System Uptime</strong></td>
                        <td>{{ system_info['System Uptime'] }}</td>
                    </tr>
                    <tr class="table-primary">
                        <td><strong>Application Uptime</strong></td>
                        <td>{{ system_info['Application Uptime'] }}</td>
                    </tr>
                    <!-- Display rest of system information -->
                    {% for key, value in system_info.items() %}
                        {% if key not in ['System Uptime', 'Application Uptime'] %}
                        <tr>
                            <td>{{ key }}</td>
                            <td>{{ value }}</td>
                        </tr>
                        {% endif %}
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

</div>

{% endblock %}
